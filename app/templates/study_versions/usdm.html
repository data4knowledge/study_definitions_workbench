{% extends "shared/_main_layout.html" %}

{% block user_content %}
  {% with request=request, user=user %}
    {% include "shared/partials/user.html" %}
  {% endwith %}    
{% endblock %}  

{% block main_content %}
{% set sponsor = data['version']['identifiers']['Clinical Study Sponsor'] %}
  <div class="mt-3 row">
    <div class="col-12">
      <div class="card card-body rounded-3 shadow-sm">
        <div class="row mt-2">
          <h4 class="card-title">{{data['version']['titles']['Official Study Title']}}</h4>
          <h6 class="card-subtitle mb-2 text-muted">Sponsor: {{sponsor}} | Phase: {{data['version']['phase']['standardCode']['decode']}} | Identifier: </h6>
        </div>
      </div>
    </div>
  </div>
  <input type="hidden" id="json_input" name="json_input" value="{{data['json']}}" />
  <div class="mt-3 row">
    <div class="col">
      <div id="data_div" class="container vw-100">
        <json-viewer id="json_view"></json-viewer>
        <script>
          var json_element = document.getElementById('json_view')
          var hidden_element = document.getElementById('json_input')
          json_element.data = hidden_element.value;
        </script> 
      </div>  
    </div>
  </div>
{% endblock %}

{% block additional_js %}
  <script src="https://unpkg.com/@alenaksu/json-viewer@2.1.0/dist/json-viewer.bundle.js"></script>
{% endblock %}
