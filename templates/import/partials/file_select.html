<div class="card border-primary mb-3">
  <div class="card-header">Upload</div>
  <div class="card-body">
    <div class="mt-3" id="form_div">
      <p>{{text}}</p>
      <form id='form' hx-encoding='multipart/form-data' hx-post='{{url}}' hx-target="#form_div" hx-swap="outerHTML">
        <input type="file" class="form-control" id="files" name='files' multiple onchange="javascript:updateList()" />
        <div class="mt-3" id="filelist"></div>
        <div class="mt-3">
          {% if disable %}
            <button class="btn btn-primary disabled">
              Upload
            </button>
          {% else %}
            <button class="btn btn-primary">
              Upload
            </button>
          {% endif %}
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  updateList = function() {
    var input = document.getElementById('files');
    var output = document.getElementById('filelist');
    var children = "";
    for (var i = 0; i < input.files.length; ++i) {
        children += '<li class="list-group-item">' + input.files.item(i).name + '</li>';
    }
    output.innerHTML = '<ul class="list-group">'+children+'</ul>';
  }
</script>