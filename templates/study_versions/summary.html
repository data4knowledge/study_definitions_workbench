{% extends "shared/_main_layout.html" %}
{% block main_content %}
  <div class="mt-3 row">
    <div class="col-3">
      <div class="card card-body rounded-3 shadow-sm">
        <h4 class="card-title">{{data['titles']['Brief Study Title']}}</h4>
        <h6 class="card-subtitle mb-2 text-muted">Sponsor: {{data['identifiers']['Clinical Study Sponsor']['organization']}} | Identifier: {{data['identifiers']['Clinical Study Sponsor']['identifier']}} | Version: {{data['versionIdentifier']}}</h6>
      </div>
    </div>
    <div class="col-3">
      <div class="card card-body rounded-3 shadow-sm">
        <div class="row">
          <div class="col-12">
            <h5 class="card-subtitle">Sponsor</h5>
            <p class="card-text">{{data['identifiers']['Clinical Study Sponsor']['organization']}} </p>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-12">                                 
            <h5 class="card-subtitle">Identifiers</h5>
            <table class="table responsive table-striped mt-1">
              {% for k, v in data['identifiers'].items() %}
                <tr>
                  <td><p class="card-text">{{v['studyIdentifierScope']['name']}}</p></td>
                  <td><p class="card-text">{{v['studyIdentifier']}}</p></td>
                </tr>
              {% endfor %}                
            </table>
          </div>
        </div>
        <div class="row mt-2">
          <div class="col-6">
            <span class="badge rounded-pill bg-info">{{data['phase']['standardCode']['decode']}}</span>  
            <span class="badge rounded-pill bg-info">Version: {{data['versionIdentifier']}}</span>  
          </div>
        </div>
      </div>
    </div>
    <div class="col-6">
      <div class="card card-body rounded-3 shadow-sm">
        <h5 class="card-subtitle">Titles</h5>
        <table class="table responsive table-striped mt-1">
          {% for k, v in data['titles'].items() %}
            <tr>
              <td>
                <p class="card-text">{{k}}:</p>
              </td>
              <td>
                <p class="card-text">{{v}}</p>
              </td>
            </tr>
          {% endfor %}
        </table>
      </div>
    </div>
  </div>

  <div class="mt-3 row">
    <div class="col-12">
      <div class="card card-body rounded-3 h-100">
        <ul class="nav nav-tabs role="tablist">
          {% for k, v in data['study_designs'].items() %}
            {% set id = "tab-" ~ loop.index0 ~ "_div" %}
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="{{id}}">Study Design 1</a>
            </li>
          {% endfor %}
        </ul>
        <div class="tab-content mt-2">
          {% for k, v in data['study_designs'].items() %}
            {% set id = "tab-" ~ loop.index0 ~ "_div" %}
            <div id="{{id}}" class="tab-pane fade show active" role="tabpanel" hx-get="/studyDesigns/{{v['uuid']}}/summary" hx-trigger="load" hx-target="#{{id}}" hx-swap="outerHTML">
              {% with %}
                {% include "shared/partials/spinner.html" %}
              {% endwith %}            
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
